#include <SPI.h> 
#include <MFRC522.h> 
// RFID pins 
#define SS_PIN 10 
#define RST_PIN 9 
MFRC522 rfid(SS_PIN, RST_PIN); 
// Ultrasonic sensor pins 
const int trigPin = 6; 
const int echoPin = 7; 
// Seat belt switch pin 
const int beltSwitchPin = 3; 
// Outputs 
const int buzzerPin = 4; 
const int relayPin = 5; 
// Threshold distance (in cm) to detect a person sitting 
const int sitThreshold = 20; 
// Authorized RFID UID (example: replace with your card UID) 
byte authorizedUID[4] = {0xDE, 0xAD, 0xBE, 0xEF}; 
void setup() { 
Serial.begin(9600); 
SPI.begin(); 
rfid.PCD_Init(); 
pinMode(trigPin, OUTPUT); 
pinMode(echoPin, INPUT); 
pinMode(beltSwitchPin, INPUT); 
pinMode(buzzerPin, OUTPUT); 
pinMode(relayPin, OUTPUT); 
digitalWrite(relayPin, LOW); // Initially OFF 
Serial.println("System Initialized."); 
} 
bool checkRFID() { 
if (!rfid.PICC_IsNewCardPresent()) return false; 
if (!rfid.PICC_ReadCardSerial()) return false; 
for (byte i = 0; i < 4; i++) { 
if (rfid.uid.uidByte[i] != authorizedUID[i]) { 
return false; 
} 
} 
rfid.PICC_HaltA(); 
return true; 
} 
long getDistance() { 
digitalWrite(trigPin, LOW); 
delayMicroseconds(2); 
digitalWrite(trigPin, HIGH); 
delayMicroseconds(10); 
digitalWrite(trigPin, LOW); 
long duration = pulseIn(echoPin, HIGH); 
long distance = duration * 0.034 / 2; 
return distance; 
} 
void loop() { 
bool authorized = checkRFID(); 
long distance = getDistance(); 
bool sitting = (distance < sitThreshold); 
bool beltOn = digitalRead(beltSwitchPin) == HIGH; 
Serial.print("RFID: "); Serial.print(authorized); 
Serial.print(" | Sitting: "); Serial.print(sitting); 
Serial.print(" | Belt: "); Serial.println(beltOn);  
                                                   
  if (authorized && sitting && beltOn) { 
    digitalWrite(buzzerPin, LOW); 
    digitalWrite(relayPin, HIGH); // Allow engine/ignition 
    Serial.println("Access Granted. Safe to Drive."); 
  } else { 
    digitalWrite(buzzerPin, HIGH); 
    digitalWrite(relayPin, LOW);  // Block engine 
    Serial.println("Access Denied or Safety Not Met!"); 
  } 
 
  delay(1000); 
} 